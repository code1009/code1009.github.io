<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8" />
	<title>code1009</title>
	<link rel="stylesheet" type="text/css" href="../core.css" />
	<link rel="stylesheet" type="text/css" href="../menu.css" />
	<link rel="stylesheet" type="text/css" href="./page.css" />
	<script type="text/javascript" src="../core.js"></script>
	<script type="text/javascript" src="../menu.js"></script>
	<script type="text/javascript" src="../mainmenu.js"></script>
	<script type="text/javascript" src="./submenu.js"></script>
	<script type="text/javascript" src="./pageN.js"></script>

</head>
<body>

	<div id="page-container">

		<div id="page-information"></div>

		<div id="page-resizer"></div>

		<div id="page-contents">
			<div id="subMenu" class="menu"></div>
			<br />
			<div id="page-markdown-view">
			</div>
		</div>

	</div>

	<script>
        function loadMarkDownScript(callback) {
            var script = document.createElement('script');
            script.src = "https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js";
            //script.src = "https://cdn.jsdelivr.net/npm/marked/marked.min.js";
            script.type = "text/javascript";
            script.onload = callback;
            document.head.appendChild(script);
        }

        function renderMarkdwon(markdown_view_id, markdown_url) {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange =
                function () {
                    if (this.readyState == 4 && this.status == 200) {
                        const markdown = this.responseText;

                        //marked
                        //const html = marked.parse(markdown);

                        //showdown
                        const converter = new showdown.Converter();
                        const html = converter.makeHtml(markdown);

                        document.getElementById(markdown_view_id).innerHTML = html;
                    }
                }
                ;
            xmlhttp.open("GET", markdown_url, true);
            xmlhttp.send();
        }

		function initializeMarkdwonView() {
			const view = document.getElementById("page-markdown-view");
			if (!view) {
				return;
			}

			loadMarkDownScript(
				function () {
					renderMarkdwon("markdown-view", "./page2.md");
				}
			);
		}
		initializeMarkdwonView();
	</script>
</body>
</html>
